# 索引

## 简介

### 概述

+ 索引是对数据库表中一或多个列的值进行排序的结构，是帮助MySQL高效获取数据的数据结构。

### 作用

+ 索引就是加快检索表中数据的方法。
  - 数据库的索引类似于书籍的索引。
  - 在书籍中，索引允许用户不必翻阅完整个书就能迅速地找到所需要的信息。
  - 在数据库中，索引也允许数据库程序迅速地找到表中的数据，而不必扫描整个数据库。

### 分类

+ B+Tree索引
  - 查找、排序和分组
+ Hash索引
  - 只能查找，且无法范围查找

**补充**

+ InnoDB 存储引擎有一个特殊的功能叫“自适应哈希索引”
  - 当某个索引值被使用的非常频繁时，会在 B+Tree 索引之上再创建一个哈希索引
  - 这样就让 B+Tree 索引具有哈希索引的一些优点，比如快速的哈希查找

## 实现

+ InnoDB 的 B+Tree 索引分为**主索引**和**辅助索引**
+ 主索引的叶子节点 data 域记录着完整的数据记录，这种索引方式被称为==聚簇索引==
  - 因为无法把数据行存放在两个不同的地方，所以==一个表只能有一个聚簇索引==
+ 辅助索引的叶子节点的 data 域记录着主键的值，因此在使用辅助索引进行查找时，需要==先查找到主键值，然后再到主索引中进行查找==

## 使用

### 最左匹配原则

+ 

### 失效

+ 查询条件中有or
+ like查询是以'%'开头
+ 对查询的列上有运算或者函数的
+ 如果列类型是字符串，那一定要在条件中将数据使用引号引用起来,否则不使用索引
+ 左连接查询或者右连接查询查询关联的字段编码格式不一样
+ 如果mysql估计使用全表扫描要比使用索引快,则不使用索引

## 优化

+ 用explain 命令查看执行计划，然后针对性的修改sql语句