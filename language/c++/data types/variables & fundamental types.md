# 变量 & 基础数据类型

- [变量 \& 基础数据类型](#变量--基础数据类型)
  - [基础数据类型](#基础数据类型)
    - [修饰符](#修饰符)
    - [补码](#补码)
    - [大小端](#大小端)
  - [变量](#变量)
    - [定义 \& 声明](#定义--声明)
    - [初始化](#初始化)
    - [命名规范](#命名规范)
    - [作用域](#作用域)

## 基础数据类型

> C/C++语言中，除了int、char、bool等基础数据类型（Fundamental Data Types）之外，还有数组、指针和引用构成的派生数据类型（Derived Data Types）以及结构、联合和类构成的用户自定义类型（User Defined Data Types）。总的来说，C/C++中类型能划分成图1所示的三种。

![图1 数据类型](https://media.geeksforgeeks.org/wp-content/cdn-uploads/20191113115600/DatatypesInC.png)

一般来说，C++中基础数据类型的大小如下表所示：

|  类型  | 大小（字节） |
| ------ | ----------  |
| short  |      2      |
|  int   |      4      |
|  long  |      8      |
|  float |      4      |
| double |      8      |

### 修饰符

一些基本类型可以使用一个或多个类型修饰符进行修饰：

- signed：signed int
- unsigned： unsigned char、unsigned int
- short：short int
- long：long long、long double

### 补码

在C/C++中，整数类型（包括带符号整数）通常使用补码表示和存储。

在补码表示中，最高位（最左边的位）被用作符号位。如果符号位为0，则表示正数；如果符号位为1，则表示负数。因此，补码表示与其类型字节大小有关。

对于正数，其补码表示与其二进制表示相同。对于负数，其补码表示通过以下方式获得：

- 取其绝对值的二进制表示。
- 反转所有位（0 变为 1，1 变为 0）。
- 将得到的结果加 1。

### 大小端

大小端（Endianness）是指在存储多字节数据时，字节的顺序排列方式。在计算机系统中，有两种常见的大小端方式：

- 大端序（Big Endian）：最高有效字节（Most Significant Byte，MSB）存储在最低的内存地址，最低有效字节（Least Significant Byte，LSB）存储在最高的内存地址。类比于阅读顺序，从左到右读取字节，最高有效字节在前。
- 小端序（Little Endian）：最低有效字节（LSB）存储在最低的内存地址，最高有效字节（MSB）存储在最高的内存地址。类比于阅读顺序，从左到右读取字节，最低有效字节在前。

## 变量

变量能提供一个具有名称、可提供程序操作的存储空间。C++中每个变量都有其数据类型，数据类型决定其所占内存空间的大小和布局方式、该空间能存储的值范围，以及能参与的运算。

### 定义 & 声明

**定义的形式**：

变量定义的基本形式化是：类型说明符（Type Specifier）紧跟由一个或多个变量名组成的列表，其中变量名以逗号分隔，最后以分号结束。此外，定义时还可以为一个或多个变量赋予初值。例如：

```c++
int sum = 0, value, sold_items = 0;
```

**声明的作用**：

为了允许把程序拆分成多个逻辑部分来编写，C++语言支持分离式编译机制。该机制允许程序分割为多个文件，每个文件可以被独立编译。

如果程序分为多个文件，则需要有在文件间共享代码的方法。例如，一个文件可能需要使用另一个文件中定义的变量。此时，就需要声明（Declaration）变量，即让变量为程序所知。

**声明与定义的关系**：

声明（Declaration）只是负责告知程序存在这样一个变量，而定义（Definition）则是负责创建与名字关联的实体。

**声明的形式**：

与变量定义类似，声明也需要规定变量的类型和名字。但声明还需要额外添加关键字extern，并且避免显式的初始化变量。比如：

```c++
extern int i; // 声明i
int j; // 定义j
```

### 初始化

当对象在创建时获得了一个特定的值，我们就称这个对象被初始化（Initialized）了。

**初始化与赋值**：

初始化不是赋值，它只是一般依靠赋值完成。前者的含义是创建变量时赋予其一个初始值，而后者则是把对象当前的值擦除，而以一个新的值来代替。

**列表初始化**：

使用花括号进行初始化的方法被称为列表初始化（List Initialization）。比如：

```c++
int sold_items = {0};
int unsold_items{0};

std::vector<int> nums = {0, 1, 2, 3};
std::vector<std::string> names{"Tom", "Sam", "John"};
```

此外，C++标准库中的容器还可以使用容纳元素数量和所有元素的统一初始值来初始化。比如：

```c++
std::vector<int> in_degrees(10, 0);
std::vector<std::string> file_names(3, "a.txt");
```

**值初始化**：

对于上面这种方法，C++标准库中的容器还可以只提供元素数量而略去初始值。此时，库会创建一个值初始化（Value-Initialized）元素初值，并把他赋给所有元素。而这个初值由其中的元素类型决定。

**默认初始化**：

如果定义变量时，没有指定初始值，则变量被默认初始化（Default Initialized）。默认值到底是什么由变量类型和位置（全局或局部）决定。

### 命名规范

在定义变量时，变量名可以是字母、数字和下划线的组合。但是也不是随便的组合，要注意以下几个命名规则：

- 开头必须是字母或下划线，不能是数字。
- 变量名中的字母是区分大小写的。
- 变量名绝对不可以是C/C++关键字。
- 变量名中不能有空格。

### 作用域

作用域中一旦声明了某个名字，它嵌套着的所有作用域中都能访问到该名字。同时，内层作用域能够重新定义外层作用域已有的名字。
