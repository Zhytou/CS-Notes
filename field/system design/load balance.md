# 负载均衡

- [负载均衡](#负载均衡)
  - [应用](#应用)
    - [DNS负载均衡](#dns负载均衡)
    - [NAT负载均衡](#nat负载均衡)
  - [一致性哈希算法](#一致性哈希算法)
  - [反向代理](#反向代理)
    - [功能](#功能)
    - [缺陷](#缺陷)
  - [参考](#参考)

负载均衡（Load Balance），其含义就是指将负载（工作任务）进行平衡、分摊到多个操作单元上进行运行。

负载均衡构建在原有网络结构之上，它提供了一种透明且廉价有效的方法扩展服务器和网络设备的带宽、加强网络数据处理能力、增加吞吐量、提高网络的可用性和灵活性。

## 应用

### DNS负载均衡

**描述**：

- 在DNS中为多个地址配置同一个名字，因而查询这个名字的客户机将得到其中一个地址，从而使得不同的客户访问不同的服务器，达到负载均衡的目的。

**缺陷**：

- DNS负载均衡是一种简单而有效的方法，但是它不能区分服务器的差异，也不能反映服务器的当前运行状态。

### NAT负载均衡

**描述**:

- 简单地说就是将一个IP地址转换为另一个IP地址，一般用于未经注册的内部地址与合法的、已获注册的Internet IP地址间进行转换。

## 一致性哈希算法

## 反向代理

- 反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求；
- 然后，将请求转发给内部网络上的服务器；
- 最后，将从服务器上得到的结果返回给internet上请求连接的客户端。
- 此时代理服务器对外就表现为一个服务器。

- 反向代理是一种可以集中地调用内部服务，并提供统一接口给公共客户的 web 服务器。

### 功能

- **增加安全性** - 隐藏后端服务器的信息，屏蔽黑名单中的 IP，限制每个客户端的连接数。

- **提高可扩展性和灵活性** - 客户端只能看到反向代理服务器的 IP，这使你可以增减服务器或者修改它们的配置。

- 本地终结 SSL 会话
  - 解密传入请求，加密服务器响应，这样后端服务器就不必完成这些潜在的高成本的操作。
  - 免除了在每个服务器上安装 X.509 证书的需要

- **压缩** - 压缩服务器响应

- **缓存** - 直接返回命中的缓存结果

- 静态内容
- 直接提供静态内容
  - HTML/CSS/JS
  - 图片
  - 视频
  - 等等

### 缺陷

- 引入反向代理会增加系统的复杂度。
- 单独一个反向代理服务器仍可能发生单点故障，配置多台反向代理服务器（如故障转移）会进一步增加复杂度。

## 参考

- [system-design-primer](https://github.com/donnemartin/system-design-primer#sharding)
- [How does a load balancer distribute client traffic across severs?](https://kemptechnologies.com/load-balancer/load-balancing-algorithms-techniques/)
- [负载均衡](https://baike.baidu.com/item/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/932451?fr=aladdin)
- [什么是负载均衡原理](https://www.zhihu.com/question/61783920)
- [负载均衡调度算法大全](https://www.runoob.com/w3cnote/balanced-algorithm.html)
